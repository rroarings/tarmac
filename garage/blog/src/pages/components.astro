---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import DriverCard from "../components/DriverCard.astro";
import RaceCard from "../components/RaceCard.astro";
import StatCard from "../components/StatCard.astro";
import FormattedDate from "../components/FormattedDate.astro";
import { getCollection } from "astro:content";

// Get sample data for components
const sampleDriver = (await getCollection("drivers"))[0];
const sampleRace = (await getCollection("races"))[0];

const SITE_TITLE = "Component Showcase";
const SITE_DESCRIPTION = "Visual testing page for Trackside components";
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
    <style>
      .component-section {
        padding: 2rem;
        margin: 2rem 0;
        border: 1px solid #e5e7eb;
        border-radius: 0.5rem;
      }
      .component-title {
        font-size: 1.5rem;
        font-weight: bold;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #e5e7eb;
      }
      .component-description {
        margin-bottom: 1.5rem;
        color: #4b5563;
      }
      .component-props {
        background: #f3f4f6;
        padding: 1rem;
        border-radius: 0.375rem;
        margin-bottom: 1.5rem;
      }
      .prop-table {
        width: 100%;
        border-collapse: collapse;
      }
      .prop-table th,
      .prop-table td {
        padding: 0.5rem;
        text-align: left;
        border-bottom: 1px solid #e5e7eb;
      }
      .prop-table th {
        font-weight: 600;
        background: #f9fafb;
      }
      .component-demo {
        padding: 1.5rem;
        border: 1px dashed #cfd2d6;
        border-radius: 0.375rem;
      }
    </style>
  </head>
  <body>
    <Header />
    <main class="max-w-7xl mx-auto px-4 py-8">
      <h1 class="text-3xl font-bold mb-8">Component Showcase</h1>

      <!-- DriverCard Component -->
      <section class="component-section">
        <h2 class="component-title">DriverCard</h2>
        <p class="component-description">
          Displays a driver's information in a card format, including their name,
          team, points, and other statistics.
        </p>

        <div class="component-props">
          <h3 class="text-lg font-semibold mb-2">Props</h3>
          <table class="prop-table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                <th>Required</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>driver</td>
                <td>Driver</td>
                <td>The driver object containing all driver information</td>
                <td>Yes</td>
              </tr>
              <tr>
                <td>year</td>
                <td>string</td>
                <td>The season year</td>
                <td>No</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="component-demo">
          <div class="max-w-sm">
            <DriverCard driver={sampleDriver} year="2025" />
          </div>
        </div>
      </section>

      <!-- RaceCard Component -->
      <section class="component-section">
        <h2 class="component-title">RaceCard</h2>
        <p class="component-description">
          Displays information about a race event, including the circuit, date, and
          status.
        </p>

        <div class="component-props">
          <h3 class="text-lg font-semibold mb-2">Props</h3>
          <table class="prop-table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                <th>Required</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>race</td>
                <td>Race</td>
                <td>The race object containing all race information</td>
                <td>Yes</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="component-demo">
          <div class="max-w-sm">
            <RaceCard race={sampleRace} />
          </div>
        </div>
      </section>

      <!-- StatCard Component -->
      <section class="component-section">
        <h2 class="component-title">StatCard</h2>
        <p class="component-description">
          Displays a statistic with a label in a card format.
        </p>

        <div class="component-props">
          <h3 class="text-lg font-semibold mb-2">Props</h3>
          <table class="prop-table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                <th>Required</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>label</td>
                <td>string</td>
                <td>The label for the statistic</td>
                <td>Yes</td>
              </tr>
              <tr>
                <td>value</td>
                <td>string | number</td>
                <td>The value to display</td>
                <td>Yes</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="component-demo">
          <div class="flex">
            <StatCard label="Points" value={25} />
            <StatCard label="Position" value={1} />
          </div>
        </div>
      </section>

      <!-- FormattedDate Component -->
      <section class="component-section">
        <h2 class="component-title">FormattedDate</h2>
        <p class="component-description">
          Formats and displays a date in a consistent format across the
          application.
        </p>

        <div class="component-props">
          <h3 class="text-lg font-semibold mb-2">Props</h3>
          <table class="prop-table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                <th>Required</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>date</td>
                <td>Date</td>
                <td>The date to format</td>
                <td>Yes</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="component-demo">
          <FormattedDate date={new Date()} />
        </div>
      </section>
    </main>
    <Footer />
  </body>
</html>
