---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import DriverCard from "../components/DriverCard.astro";
import RaceCard from "../components/RaceCard.astro";
import StatCard from "../components/StatCard.astro";
import FormattedDate from "../components/FormattedDate.astro";
import { getCollection } from "astro:content";

// Get sample data for components
const sampleDriver = (await getCollection("drivers"))[0];

const sampleRaces = {
  completed: {
    id: "miami-gp",
    collection: "races" as const,
    data: {
      trackName: "Miami International Autodrome",
      location: "Miami, USA",
      date: new Date("2025-05-05"),
      raceNumber: 5,
      season: "2025" as const,
      completed: true,
      winner: "Max Verstappen",
      winningTeam: "Red Bull Racing",
      fastestLapTime: "1:29.708",
      trackImage: "/blog-placeholder-1.jpg"
    }
  },
  delayed: {
    id: "monaco-gp",
    collection: "races" as const,
    data: {
      trackName: "Circuit de Monaco",
      location: "Monte Carlo, Monaco",
      date: new Date("2025-05-26"),
      raceNumber: 7,
      season: "2025" as const,
      completed: false,
      winner: "",
      winningTeam: "",
      fastestLapTime: "",
      trackImage: "/blog-placeholder-2.jpg"
    }
  },
  nextRace: {
    id: "spanish-gp",
    collection: "races" as const,
    data: {
      trackName: "Circuit de Barcelona-Catalunya",
      location: "Barcelona, Spain",
      date: new Date("2025-05-30"),
      raceNumber: 8,
      season: "2025" as const,
      completed: false,
      winner: "",
      winningTeam: "",
      fastestLapTime: "",
      trackImage: "/blog-placeholder-3.jpg"
    }
  },
  upcoming: {
    id: "austria-gp",
    collection: "races" as const,
    data: {
      trackName: "Red Bull Ring",
      location: "Spielberg, Austria",
      date: new Date("2025-06-15"),
      raceNumber: 10,
      season: "2025" as const,
      completed: false,
      winner: "",
      winningTeam: "",
      fastestLapTime: "",
      trackImage: "/blog-placeholder-4.jpg"
    }
  }
};

const SITE_TITLE = "Component Showcase";
const SITE_DESCRIPTION = "Visual testing page for Trackside components";
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
    <style>
      .component-section {
        padding: 2rem;
        margin: 2rem 0;
        border: 1px solid #e5e7eb;
        border-radius: 0.5rem;
      }
      .component-title {
        font-size: 1.5rem;
        font-weight: bold;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #e5e7eb;
      }
      .component-description {
        margin-bottom: 1.5rem;
        color: #4b5563;
      }
      .component-props {
        background: #f3f4f6;
        padding: 1rem;
        border-radius: 0.375rem;
        margin-bottom: 1.5rem;
      }
      .prop-table {
        width: 100%;
        border-collapse: collapse;
      }
      .prop-table th,
      .prop-table td {
        padding: 0.5rem;
        text-align: left;
        border-bottom: 1px solid #e5e7eb;
      }
      .prop-table th {
        font-weight: 600;
        background: #f9fafb;
      }
      .component-demo {
        padding: 1.5rem;
        border: 1px dashed #cfd2d6;
        border-radius: 0.375rem;
      }
    </style>
  </head>
  <body>
    <Header />
    <main class="max-w-7xl mx-auto px-4 py-8">
      <h1 class="text-3xl font-bold mb-8">Component Showcase</h1>

      <!-- FormattedDate Component -->
      <section class="component-section">
        <h2 class="component-title">FormattedDate</h2>
        <p class="component-description">
          Formats and displays a date in a consistent format across the
          application.
        </p>

        <div class="component-props">
          <h3 class="text-lg font-semibold mb-2">Props</h3>
          <table class="prop-table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                <th>Required</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>date</td>
                <td>Date</td>
                <td>The date to format</td>
                <td>Yes</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="component-demo">
          <FormattedDate date={new Date()} />
        </div>
      </section>

      <!-- DriverCard Component -->
      <section class="component-section">
        <h2 class="component-title">DriverCard</h2>
        <p class="component-description">
          Displays a driver's information in a card format, including their name,
          team, points, and other statistics.
        </p>

        <div class="component-props">
          <h3 class="text-lg font-semibold mb-2">Props</h3>
          <table class="prop-table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                <th>Required</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>driver</td>
                <td>Driver</td>
                <td>The driver object containing all driver information</td>
                <td>Yes</td>
              </tr>
              <tr>
                <td>year</td>
                <td>string</td>
                <td>The season year</td>
                <td>No</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="component-demo">
          <div class="max-w-sm">
            <DriverCard driver={sampleDriver} year="2025" />
          </div>
        </div>
      </section>

      <!-- RaceCard Component -->
      <section class="component-section">
        <h2 class="component-title">RaceCard</h2>
        <p class="component-description">
          Displays information about a race event, including the circuit, date, and
          status.
        </p>

        <div class="component-props">
          <h3 class="text-lg font-semibold mb-2">Props</h3>
          <table class="prop-table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                <th>Required</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>race</td>
                <td>Race</td>
                <td>
                  <div class="space-y-2">
                    <p>An object containing race information with the following fields:</p>
                    <div class="text-sm">
                      <p class="font-semibold mt-2 mb-1">Required fields:</p>
                      <ul class="list-disc pl-4 space-y-1">
                        <li><code>trackName</code>: Name of the circuit</li>
                        <li><code>location</code>: Race location</li>
                        <li><code>date</code>: Race date (can be date-time, date string, or unix timestamp)</li>
                        <li><code>season</code>: Must be "2024" or "2025"</li>
                        <li><code>winner</code>: Race winner's name</li>
                        <li><code>winningTeam</code>: Winning constructor</li>
                        <li><code>fastestLapTime</code>: Fastest lap time</li>
                        <li><code>raceNumber</code>: Race number in the season</li>
                      </ul>
                      <p class="font-semibold mt-2 mb-1">Optional fields:</p>
                      <ul class="list-disc pl-4 space-y-1">
                        <li><code>fastestLapDriver</code>: Driver who set the fastest lap</li>
                        <li><code>trackImage</code>: Circuit layout image</li>
                        <li><code>completed</code>: Race status (defaults to false)</li>
                      </ul>
                    </div>
                  </div>
                </td>
                <td>Yes</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="component-demo">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="flex flex-col">
              <h4 class="text-sm mb-3">Completed Race:</h4>
              <div class="flex-1">
                <RaceCard race={sampleRaces.completed} />
              </div>
            </div>
            <div class="flex flex-col">
              <h4 class="text-sm mb-3">Delayed Race:</h4>
              <div class="flex-1">
                <RaceCard race={sampleRaces.delayed} />
              </div>
            </div>
            <div class="flex flex-col">
              <h4 class="text-sm mb-3">Next Race (Within 4 days):</h4>
              <div class="flex-1">
                <RaceCard race={sampleRaces.nextRace} />
              </div>
            </div>
            <div class="flex flex-col">
              <h4 class="text-sm mb-3">Upcoming Race:</h4>
              <div class="flex-1">
                <RaceCard race={sampleRaces.upcoming} />
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- StatCard Component -->
      <section class="component-section">
        <h2 class="component-title">StatCard</h2>
        <p class="component-description">
          Displays a statistic with a label in a card format.
        </p>

        <div class="component-props">
          <h3 class="text-lg font-semibold mb-2">Props</h3>
          <table class="prop-table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                <th>Required</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>label</td>
                <td>string</td>
                <td>The label for the statistic</td>
                <td>Yes</td>
              </tr>
              <tr>
                <td>value</td>
                <td>string | number</td>
                <td>The value to display</td>
                <td>Yes</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="component-demo">
          <div class="flex">
            <StatCard label="Points" value={25} />
            <StatCard label="Position" value={1} />
          </div>
        </div>
      </section>

      <!-- FormattedDate Component -->
      <section class="component-section">
        <h2 class="component-title">FormattedDate</h2>
        <p class="component-description">
          Formats and displays a date in a consistent format across the
          application.
        </p>

        <div class="component-props">
          <h3 class="text-lg font-semibold mb-2">Props</h3>
          <table class="prop-table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
                <th>Required</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>date</td>
                <td>Date</td>
                <td>The date to format</td>
                <td>Yes</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="component-demo">
          <FormattedDate date={new Date()} />
        </div>
      </section>
    </main>
    <Footer />
  </body>
</html>
