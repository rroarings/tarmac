---
import BaseHead from "../components/BaseHead.astro"
import Header from "../components/Header.astro"
import Footer from "../components/Footer.astro"
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts"
import { getCollection } from 'astro:content';

const posts = await getCollection('blog');

// Map posts to include slug and title from data
const formattedPosts = posts.map(post => ({
  slug: post.id,
  title: post.data.title
}));
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead
      title={SITE_TITLE}
      description={SITE_DESCRIPTION}
    />
  </head>
  <body>
    <Header />
    <main>
      <!-- About Me Section -->
      <section class="py-16 text-center">
        <div class="container mx-auto px-4">
          <div class="bg-gray-100 border border-gray-300 rounded p-6 inline-block text-left">
            <div class="flex gap-2 mb-4">
              <i class="bi bi-bookmarks text-4xl text-gray-700 mr-4"></i>
              <div>
                <h2 class="">Trackside Chat</h2>
                <p class="text-gray-600">Trackside's Blog</p>
              </div>
            </div>
            <p class="text-gray-700">
              Welcome to Trackside Chat, your ultimate Formula 1 blog. Here, I share insights,
              analysis, and the latest news from the world of Formula 1. Join me as we explore the
              thrilling world of motorsport together!
            </p>
          </div>
        </div>
      </section>

      <!-- Recent Posts Section -->
      <section class="py-16 text-center">
        <div class="container mx-auto px-4">
          <div class="bg-gray-100 border border-gray-300 rounded p-6 inline-block text-left">
            <div class="flex gap-2 mb-4">
              <i class="bi bi-bookmarks text-4xl text-gray-700 mr-4"></i>
              <div>
                <h2 class="">Recent Posts</h2>
                <p class="text-gray-600">Trackside's Blog</p>
              </div>
            </div>
            <ul class="text-gray-700">
              {formattedPosts.map((post) => (
                <li class="mb-2">
                  <a href={`/blog/${post.slug}`} class="text-blue-600 hover:underline">{post.title}</a>
                </li>
              ))}
            </ul>
          </div>
        </div>
      </section>
    </main>
    <Footer />
  </body>
</html>
